# üîÑ –°–∏—Å—Ç–µ–º–∞ –±–µ–∫–∞–ø–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞ Laksh

## üìã –ß—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–µ

### ‚úÖ **–°–û–•–†–ê–ù–Ø–ï–¢–°–Ø –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö PostgreSQL** - –≤ Docker volume `habrdb-data`
- **–ö–æ–¥ –ø—Ä–æ–µ–∫—Ç–∞** - –≤–µ—Å—å –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ö –ø—Ä–æ–µ–∫—Ç–∞
- **Media —Ñ–∞–π–ª—ã** - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ `docker/laksh-back/app/src/media/`
- **–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã** - –≤ `docker/laksh-back/app/src/static/`
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏** - nginx.conf, docker-compose.yml –∏ –¥—Ä.

### ‚ùå **–ù–ï –°–û–•–†–ê–ù–Ø–ï–¢–°–Ø –ø—Ä–∏ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–µ:**
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø–∞–∫–µ—Ç—ã –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö (–ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
- –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –∏ –∫–µ—à–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

## üõ†Ô∏è –°–∫—Ä–∏–ø—Ç—ã –±–µ–∫–∞–ø–æ–≤

### 1. –ü–æ–ª–Ω—ã–π –±–µ–∫–∞–ø –ø—Ä–æ–µ–∫—Ç–∞
```bash
./backup.sh
```
**–í–∫–ª—é—á–∞–µ—Ç:**
- –í–µ—Å—å –∫–æ–¥ –ø—Ä–æ–µ–∫—Ç–∞
- –ë–∞–∑—É –¥–∞–Ω–Ω—ã—Ö PostgreSQL 
- –í—Å–µ Docker volumes
- Media —Ñ–∞–π–ª—ã
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~2-5 –º–∏–Ω—É—Ç  
**–†–∞–∑–º–µ—Ä:** ~100-500 MB –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –¥–∞–Ω–Ω—ã—Ö

### 2. –ë—ã—Å—Ç—Ä—ã–π –±–µ–∫–∞–ø —Ç–æ–ª—å–∫–æ –ë–î
```bash
./quick-backup-db.sh
```
**–í–∫–ª—é—á–∞–µ—Ç:**
- SQL –¥–∞–º–ø –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –ë–∏–Ω–∞—Ä–Ω—ã–π –¥–∞–º–ø –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~30 —Å–µ–∫  
**–†–∞–∑–º–µ—Ä:** ~1-50 MB –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –¥–∞–Ω–Ω—ã—Ö

### 3. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±–µ–∫–∞–ø–∞
```bash
./restore.sh /path/to/backup/directory
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–µ–∫–∞–ø–∞

```
/backup/laksh-20250901_190000/
‚îú‚îÄ‚îÄ backup-manifest.txt           # –û–ø–∏—Å–∞–Ω–∏–µ –±–µ–∫–∞–ø–∞
‚îú‚îÄ‚îÄ project-code.tar.gz          # –í–µ—Å—å –∫–æ–¥ –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ database_backup.sql          # SQL –¥–∞–º–ø –ë–î
‚îú‚îÄ‚îÄ habrdb-data-volume.tar.gz    # Volume PostgreSQL
‚îú‚îÄ‚îÄ pgadmin-volume.tar.gz        # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ pgAdmin
‚îú‚îÄ‚îÄ laksh-front-files-volume.tar.gz # Volume —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
‚îî‚îÄ‚îÄ media-files.tar.gz           # Media —Ñ–∞–π–ª—ã
```

## ‚ö° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –±–µ–∫–∞–ø–∞–º

### –ü–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å:
- **–ï–∂–µ–¥–Ω–µ–≤–Ω–æ:** –ë—ã—Å—Ç—Ä—ã–π –±–µ–∫–∞–ø –ë–î (`quick-backup-db.sh`)
- **–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ:** –ü–æ–ª–Ω—ã–π –±–µ–∫–∞–ø –ø—Ä–æ–µ–∫—Ç–∞ (`backup.sh`)
- **–ü–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏:** –ü–æ–ª–Ω—ã–π –±–µ–∫–∞–ø

### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ cron:
```bash
# –î–æ–±–∞–≤–∏—Ç—å –≤ crontab -e:
# –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±–µ–∫–∞–ø –ë–î –≤ 2:00
0 2 * * * /path/to/project/quick-backup-db.sh

# –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π –ø–æ–ª–Ω—ã–π –±–µ–∫–∞–ø –≤ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ –≤ 3:00
0 3 * * 0 /path/to/project/backup.sh
```

### –•—Ä–∞–Ω–µ–Ω–∏–µ –±–µ–∫–∞–ø–æ–≤:
- –õ–æ–∫–∞–ª—å–Ω–æ: `~/backup/` 
- –û–±–ª–∞–∫–æ: Google Drive, Yandex.Disk
- –£–¥–∞–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä: rsync, scp
- Git LFS –¥–ª—è –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

## üö® –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ —ç–∫—Å—Ç—Ä–µ–Ω–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö

### –ü–æ–ª–Ω–∞—è –ø–æ—Ç–µ—Ä—è –ø—Ä–æ–µ–∫—Ç–∞:
1. `git clone` –ø—Ä–æ–µ–∫—Ç–∞ (–µ—Å–ª–∏ –≤ Git)
2. `./restore.sh /path/to/latest/backup`

### –¢–æ–ª—å–∫–æ –ø—Ä–æ–±–ª–µ–º—ã —Å –ë–î:
1. `docker-compose down`
2. `docker volume rm laksh-docker-compose-dev_habrdb-data`
3. `docker-compose up -d postgres`
4. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–∞–º–ø: `docker exec -i laksh-postgres-container psql -U habrpguser -d habrdb < backup.sql`

### –ü—Ä–æ–±–ª–µ–º—ã —Å –∫–æ–¥–æ–º:
1. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ `project-code.tar.gz`
2. `docker-compose build --no-cache`
3. `docker-compose up -d`

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ volumes
docker system df -v

# –†–∞–∑–º–µ—Ä –ø—Ä–æ–µ–∫—Ç–∞
du -sh /home/landev/Projects/laksh/laksh-docker-compose-dev

# –†–∞–∑–º–µ—Ä –±–µ–∫–∞–ø–æ–≤
du -sh ~/backup/*
```
